<app-navbar></app-navbar>

<div class="flex justify-center mt-4 text-2xl md:text-5xl font-semibold">
  <h1>Products list</h1>
</div>

<div class="text-center mx-auto mt-2 mb-4">
  <p class="text-lg text-gray-700">You can order the products if you want.</p>
</div>

<div class="flex justify-center mt-5 mb-12">
  <div class="w-75">
    <!-- Column selection checkboxes -->
    <div class="mb-4 flex gap-3">
      <mat-slide-toggle color="accent" [(ngModel)]="columnsVisibility.name" (change)="columnVisibility()">Name</mat-slide-toggle>
      <mat-slide-toggle color="accent" [(ngModel)]="columnsVisibility.price" (change)="columnVisibility()">Price</mat-slide-toggle>
      <mat-slide-toggle color="accent" [(ngModel)]="columnsVisibility.category" (change)="columnVisibility()">Product type</mat-slide-toggle>
      <mat-slide-toggle color="accent" [(ngModel)]="columnsVisibility.actions" (change)="columnVisibility()">Actions</mat-slide-toggle>
    </div>

    <div class="relative overflow-x-auto shadow-lg sm:rounded-lg">
      <table mat-table [dataSource]="dataSource" matSort class="w-full text-sm text-left rtl:text-right text-gray-500">
        <!-- Header de la tabla -->
        <ng-container *ngIf="columnsVisibility.name" matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
          <td mat-cell *matCellDef="let product">{{ product.name }}</td>
        </ng-container>

        <ng-container *ngIf="columnsVisibility.price" matColumnDef="price">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Price</th>
          <td mat-cell *matCellDef="let product">${{ product.price }}</td>
        </ng-container>

        <ng-container *ngIf="columnsVisibility.category" matColumnDef="category">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Product type</th>
          <td mat-cell *matCellDef="let product">{{ product.productType ? product.productType.name : 'N/A' }}</td>
        </ng-container>

        <ng-container *ngIf="columnsVisibility.actions" matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef class="text-center">Actions</th>
          <td mat-cell *matCellDef="let product" class="text-center">
            <button type="button" (click)="deleteProduct(product.id)" class="text-red-500 hover:text-red-700 focus:outline-none mr-4 font-bold">
              Delete
            </button>
            <button type="button" (click)="editProduct(product.id)" class="text-blue-500 hover:text-blue-700 focus:outline-none font-bold">
              Edit
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[20, 10, 5]" showFirstLastButtons></mat-paginator>
    </div>
  </div>
</div>

<app-footer></app-footer>
